---
import HCB from "./top/hcb.astro";
import Cheque from "./top/cheque.astro";
import Invoice from "./top/invoice.astro";
import Card from "./top/card.astro";
---

<script>
	import anime from "animejs";

	anime
		.timeline()
		.add(
			{
				targets: "#hcb #event-name .letter",
				scale: [0, 1],
				opacity: [0, 1],
				translateZ: 0,
				easing: "easeInOutExpo",
				duration: 500,
				delay: (el, i) => 25 * i
			},
			0
		)
		.add(
			{
				targets: "#hcb #event-balance .letter",
				scale: [0, 1],
				opacity: [0, 1],
				translateZ: 0,
				easing: "easeInOutExpo",
				duration: 500,
				delay: (el, i) => 25 * i
			},
			0
		)
		.add(
			{
				targets: "#hcb .transaction",
				scale: [0.3, 1],
				translateY: ["-100%", 0],
				opacity: [0, 1],
				translateZ: 0,
				easing: "easeInOutExpo",
				duration: 1_600,
				delay: (el, i) => 100 * i
			},
			-500
		)
		.add(
			{
				targets: "#cards-container p .letter",
				scale: [0, 1],
				opacity: [0, 1],
				easing: "easeInOutExpo",
				duration: 500,
				delay: (el, i) => 25 * i
			},
			500
		)
		.add(
			{
				targets: "#invoice .placeholder-line",
				width: (_, i) => [0, i === 1 ? "75%" : "100%"],
				easing: "easeInOutExpo",
				duration: 800,
				delay: (el, i) => 150 * i
			},
			700
		)
		.add(
			{
				targets: "#invoice p .letter",
				scale: [0, 1],
				opacity: [0, 1],
				easing: "easeInOutExpo",
				duration: 500,
				delay: (el, i) => 25 * i
			},
			900
		)
		.add(
			{
				targets: "#cheque .cheque-body p .letter",
				scale: [0, 1],
				opacity: [0, 1],
				easing: "easeInOutExpo",
				duration: 500,
				delay: (el, i) => 20 * i
			},
			1500
		)
		.add(
			{
				targets: "#cheque #micr p .letter",
				translateY: ["100%", 0],
				rotateX: ["90deg", 0],
				opacity: [1, 1],
				easing: "easeInOutExpo",
				duration: 500,
				delay: (el, i) => 50 * i
			},
			1500
		)
		.add(
			{
				targets: ".sig path",
				strokeDashoffset: [anime.setDashoffset, 0],
				easing: "easeInOutSine",
				duration: 1_000
				// delay: function(el, i) { return i * 250 },
			},
			2000
		);
</script>

<div class="flex items-end gap-4 w-full">
	<HCB />
	<div class="flex col gap-4 grow">
		<div class="flex gap-4 grow">
			<div class="flex col gap-4 grow">
				<Card />
				<Invoice />
			</div>
			<div class="w-1/2"></div>
		</div>
		<Cheque />
	</div>
</div>
